(()=>{"use strict";var e={960:(e,t,o)=>{e.exports=o.p+"df100efc54d4645073d7.jpg"},291:(e,t,o)=>{e.exports=o.p+"8edfe6cd78e39aafc871.jpg"},822:(e,t,o)=>{e.exports=o.p+"44e6fede87f55e5327cc.jpg"},328:(e,t,o)=>{e.exports=o.p+"e463b225f0897d749d63.jpg"},705:(e,t,o)=>{e.exports=o.p+"70aac30a40409c4dbc71.jpg"},561:(e,t,o)=>{e.exports=o.p+"2e37fd0c260a298af732.jpg"}},t={};function o(s){var n=t[s];if(void 0!==n)return n.exports;var i=t[s]={exports:{}};return e[s](i,i.exports,o),i.exports}o.m=e,o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.p="",o.b=document.baseURI||self.location.href,(()=>{class e{constructor(e,t){this._config=e,this._formElement=t,console.log("FormValidator.js imported to index.js")}showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._config.inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._config.errorClass)}hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);t.textContent="",t.classList.remove(this._config.errorClass),e.classList.remove(this._config.inputErrorClass)}_checkFormValidity(){return this._inputElements.every((e=>e.validity.valid))}checkInputValidity(e){if(!e.validity.valid)return this.showInputError(e);this.hideInputError(e)}toggleButtonState(){if(!this._checkFormValidity())return this._submitButton.classList.add(this._config.inactiveButtonClass),void(this._submitButton.disabled=!0);this._submitButton.classList.remove(this._config.inactiveButtonClass),this._submitButton.disabled=!1}_setEventListeners(){this._inputElements=[...this._formElement.querySelectorAll(this._config.inputSelector)],this._submitButton=this._formElement.querySelector(this._config.submitButtonSelector),this._inputElements.forEach((e=>{e.addEventListener("input",(t=>{this.checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._setEventListeners()}}class t{constructor(e){let{popupClassSelector:t}=e;this._popupElement=document.querySelector(t),this._closePopupButton=this._popupElement.querySelector(".modal__close-icon"),console.log(this._popupElement.parentElement),console.log(this._popupElement.closest("div"))}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscCloseBound)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscCloseBound)}_handleLeftMouseClose(e){const t=e.target.classList.contains("modal");1===e.buttons&&t&&this.close()}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._handleEscCloseBound=this._handleEscClose.bind(this),this._handleLeftMouseCloseBound=this._handleLeftMouseClose.bind(this),this._popupElement.addEventListener("mousedown",this._handleLeftMouseCloseBound),this._closePopupButton.addEventListener("click",(e=>{e.preventDefault(),this.close()}))}}class s extends t{constructor(e){let{popupSelector:t,handleFormSubmit:o}=e;super({popupClassSelector:t}),this._popupFormInputs=Array.from(this._popupElement.querySelectorAll("input")),this._popupForm=this._popupElement.querySelector("form"),this._handleFormSubmit=o}open(e){super.open(),e&&this._popupFormInputs.forEach((t=>{t.value=e[t.id]}))}_submit(e){e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this._popupForm.reset(),super.close()}_getInputValues(){const e={};return this._popupFormInputs.forEach((t=>{e[t.id]=t.value})),e}setEventListeners(){super.setEventListeners(),this._submitThis=this._submit.bind(this),this._popupForm.addEventListener("submit",this._submitThis)}}const n=new URL(o(561),o.b),i=(document.querySelector(".page"),{formSelector:".modal__container",inputSelector:".modal__input",submitButtonSelector:".modal__save-button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"}),r=".profile__name",l=".profile__subtitle",a={name:r,job:l},c=(document.querySelector(r),document.querySelector(l),".modal_type_profile-edit"),d=document.querySelector(c),u=(document.forms.profileForm.className,document.querySelector(".profile__edit")),p=(d.querySelector(".modal__profile-name"),d.querySelector(".modal__profile-description"),d.querySelector(".modal__save-button"),document.querySelector(".profile__button")),_=".modal_type_add-card",m=document.querySelector(_),h=(m.querySelector(".modal__title"),m.querySelector(".modal__destination-title"),m.querySelector(".modal__destination-image-URL"),document.querySelector("#card").content,".destinations.page__section"),E=(document.querySelector(h),[{link:n,name:"Yosemite Valley"},{link:o(822),name:"Lake Louise"},{link:o(960),name:"Bald Mountains"},{link:o(328),name:"Latemar"},{link:o(705),name:"Vanoise National Park"},{link:o(291),name:"Lago di Braies"}]),f=(document.querySelectorAll(".modal__close-icon"),document.forms.cardForm,".modal_type_preview"),S=document.querySelector(f);S.querySelector(".modal__image"),S.querySelector(".modal__preview-caption");class g{constructor(e,t,o){let{link:s,name:n}=e;this._name=n,this._link=s,this._cardSelector=t,this._handleImageClick=o}createCard(){return this.getView()}_setEventListeners(){this._cardImage.addEventListener("click",(e=>{this._handleImageClick(this)})),this._likeButton=this._cardElement.querySelector(".destinations__caption-icon"),this._likeButton.addEventListener("click",(()=>{this._handleLikeButton()})),this._deleteButton=this._cardElement.querySelector(".destinations__trash-icon"),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteButton()}))}_handleLikeButton(){this._likeButton.classList.toggle("destinations_caption-icon_style_liked")}_handleDeleteButton(){this._cardElement.remove(),this._cardElement=null}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".destinations__card").cloneNode(!0),this._cardElement.querySelector(".destinations__caption-text").textContent=this._name,this._cardElement.classList.add(this._name.replaceAll(" ","_")),this._cardImage=this._cardElement.querySelector(".destinations__card-image"),this._cardImage.src=this._link,this._cardImage.alt="Photo of "+this._name,this._setEventListeners(),this._cardElement}}console.log("index.js loaded"),console.log("constants.js import successful -> index.js"),new e(i,d).enableValidation(),m.classList.add("modal_type_add-destination"),m.querySelector(".modal_type_add-destination .modal__container");const y=new class{constructor(e){let{name:t,job:o}=e;this.nameElement=document.querySelector(t),this.jobElement=document.querySelector(o)}getUserInfo(){return{profile_title:this.nameElement.textContent,profile_description:this.jobElement.textContent}}setUserInfo(e){const{input1:t,input2:o}=e;this.nameElement.textContent=t,this.jobElement.textContent=o}}(a),v=new s({popupSelector:c,handleFormSubmit:e=>{e.input1=e.profile_title,delete e.profile_title,e.input2=e.profile_description,delete e.profile_description,y.setUserInfo(e)}});v.setEventListeners(),u.addEventListener("click",(e=>{v.open(y.getUserInfo())}));const L=new e(i,m);L.enableValidation();const b=new class{constructor(e,t){let{items:o,renderer:s}=e;this._items=o,this.renderer=s,this._classSelector=t,this._container=document.querySelector(t)}renderItems=()=>{this._items.forEach((e=>{const t=this.renderer(e);this._appendItem(t)}))};addItem=e=>{this._container.prepend(this.renderer(e))};_appendItem=e=>{this._container.append(e)}}({items:E,renderer:e=>new g(e,"#card",(e=>{q.open(e)})).getView()},h),q=new class extends t{constructor(e){let{popupSelector:t}=e;super({popupClassSelector:t}),this._popupImage=this._popupElement.querySelector("img"),this._popupImageName=this._popupElement.querySelector("figcaption"),super.setEventListeners()}open(e){let{_cardImage:{alt:t,src:o},_name:s}=e;this._popupImage.alt=t,this._popupImage.src=o,this._popupImageName.textContent=s,super.open()}}({popupSelector:f}),I=new s({popupSelector:_,handleFormSubmit:e=>{console.log(e),e.link=e.destination_image_URL,delete e.destination_image_URL,e.name=e.destination_title,delete e.destination_title,b.addItem(e)}});I.setEventListeners(),p.addEventListener("click",(function(e){I.open(),L.toggleButtonState()})),b.renderItems()})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFrQjFKLEtBQUt1QyxjQUFjL0IsY0FBYyxjQUN4RHFELE1BQU1QLG1CQUNSLENBR0FYLElBQUFBLENBQUlnSCxHQUE0QyxJQUF6QzdDLFlBQVksSUFBRVUsRUFBRyxJQUFFRCxHQUFPZixNQUFPdEIsR0FBTXlFLEVBQzVDM0osS0FBS3lKLFlBQVlqQyxJQUFNQSxFQUN2QnhILEtBQUt5SixZQUFZbEMsSUFBTUEsRUFDdkJ2SCxLQUFLMEosZ0JBQWdCN0ksWUFBY3FFLEVBRW5DckIsTUFBTWxCLE1BQ1IsR0grRW9DLENBQUVnQixjQUFldUMsSUFFakQwRCxFQUFzQixJQUFJbEcsRUFBYyxDQUM1Q0MsY0FBZWdDLEVBQ2YvQixpQkFBbUJvRSxJQUNqQjdILFFBQVFDLElBQUk0SCxHQUVaQSxFQUFTaEMsS0FBT2dDLEVBQVM2Qiw2QkFDbEI3QixFQUFTNkIsc0JBRWhCN0IsRUFBUzlDLEtBQU84QyxFQUFTOEIseUJBQ2xCOUIsRUFBUzhCLGtCQUVoQnZCLEVBQVlXLFFBQVFsQixFQUFTLElBS2pDNEIsRUFBb0J0RyxvQkFFcEJvQyxFQUFxQnpELGlCQUFpQixTQUFTLFNBQVVDLEdBQ3ZEMEgsRUFBb0JqSCxPQUNwQjJGLEVBQTBCOUcsbUJBQzVCLElBSUErRyxFQUFZTyxhIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdHJpcGxldGVuL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3RyaXBsZXRlbi93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3RyaXBsZXRlbi93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vd2VicGFjay9ydW50aW1lL2pzb25wIGNodW5rIGxvYWRpbmciLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbl9fd2VicGFja19yZXF1aXJlX18ubSA9IF9fd2VicGFja19tb2R1bGVzX187XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiOyIsIl9fd2VicGFja19yZXF1aXJlX18uYiA9IGRvY3VtZW50LmJhc2VVUkkgfHwgc2VsZi5sb2NhdGlvbi5ocmVmO1xuXG4vLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuLy8gdW5kZWZpbmVkID0gY2h1bmsgbm90IGxvYWRlZCwgbnVsbCA9IGNodW5rIHByZWxvYWRlZC9wcmVmZXRjaGVkXG4vLyBbcmVzb2x2ZSwgcmVqZWN0LCBQcm9taXNlXSA9IGNodW5rIGxvYWRpbmcsIDAgPSBjaHVuayBsb2FkZWRcbnZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG5cdDE3OTogMFxufTtcblxuLy8gbm8gY2h1bmsgb24gZGVtYW5kIGxvYWRpbmdcblxuLy8gbm8gcHJlZmV0Y2hpbmdcblxuLy8gbm8gcHJlbG9hZGVkXG5cbi8vIG5vIEhNUlxuXG4vLyBubyBITVIgbWFuaWZlc3RcblxuLy8gbm8gb24gY2h1bmtzIGxvYWRlZFxuXG4vLyBubyBqc29ucCBmdW5jdGlvbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG5cbiAgICBjb25zb2xlLmxvZyhcIkZvcm1WYWxpZGF0b3IuanMgaW1wb3J0ZWQgdG8gaW5kZXguanNcIik7XG4gIH1cblxuICBzaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG5cbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuZXJyb3JDbGFzcyk7XG4gIH1cblxuICBoaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG5cbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmVycm9yQ2xhc3MpO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2NoZWNrRm9ybVZhbGlkaXR5KCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dEVsZW1lbnRzLmV2ZXJ5KFxuICAgICAgKGlucHV0RWxlbWVudCkgPT4gaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkXG4gICAgKTtcbiAgfVxuXG4gIGNoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgcmV0dXJuIHRoaXMuc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG5cbiAgICB0aGlzLmhpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gIH1cblxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAoIXRoaXMuX2NoZWNrRm9ybVZhbGlkaXR5KCkpIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzID0gW1xuICAgICAgLi4udGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9jb25maWcuaW5wdXRTZWxlY3RvciksXG4gICAgXTtcblxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl9jb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICApO1xuXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGUpID0+IHtcbiAgICAgICAgdGhpcy5jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cENsYXNzU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBDbGFzc1NlbGVjdG9yKTtcbiAgICB0aGlzLl9jbG9zZVBvcHVwQnV0dG9uID1cbiAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1pY29uXCIpO1xuXG4gICAgY29uc29sZS5sb2codGhpcy5fcG9wdXBFbGVtZW50LnBhcmVudEVsZW1lbnQpO1xuICAgIGNvbnNvbGUubG9nKHRoaXMuX3BvcHVwRWxlbWVudC5jbG9zZXN0KFwiZGl2XCIpKTtcbiAgfVxuICBvcGVuKCkge1xuICAgIC8vcHVibGljIG1ldGhvZCB0byBvcGVuIHBvcHVwXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2VCb3VuZCk7XG4gICAgLy9JU1NVRSAjMiBTRVRFVkVOVCBMSVNURU5FUlMgTkVFRFMgVE8gQkUgUFVCTElDIEFORCBDQUxMRUQgSU4gSU5ERVguSlNcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIC8vcHVibGljIG1ldGhvZCB0byBjbG9zZSBwb3B1cFxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlQm91bmQpO1xuICB9XG5cbiAgX2hhbmRsZUxlZnRNb3VzZUNsb3NlKGUpIHtcbiAgICBjb25zdCBpc01vZGFsID0gZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxcIik7XG4gICAgaWYgKGUuYnV0dG9ucyA9PT0gMSAmJiBpc01vZGFsKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGUpIHtcbiAgICAvL2xvb2sgZm9yIGVzY2FwZSBidXR0b24gcHJlc3Mgd2hpbGUgbW9kYWwgaXMgb3BlbmVkIGFuZCBjbG9zZSBtb2RhbCB3aGVuIHRoZSBlc2NhcGUgYnV0dG9uIGlzIHByZXNzZWRcbiAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICAvL0lTU1VFICMyIFNFVEVWRU5UIExJU1RFTkVSUyBORUVEUyBUTyBCRSBQVUJMSUMgQU5EIENBTExFRCBJTiBJTkRFWC5KU1xuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZUJvdW5kID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9oYW5kbGVMZWZ0TW91c2VDbG9zZUJvdW5kID0gdGhpcy5faGFuZGxlTGVmdE1vdXNlQ2xvc2UuYmluZCh0aGlzKTtcblxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJtb3VzZWRvd25cIixcbiAgICAgIHRoaXMuX2hhbmRsZUxlZnRNb3VzZUNsb3NlQm91bmRcbiAgICApO1xuXG4gICAgdGhpcy5fY2xvc2VQb3B1cEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCB9KSB7XG4gICAgc3VwZXIoeyBwb3B1cENsYXNzU2VsZWN0b3I6IHBvcHVwU2VsZWN0b3IgfSk7IC8vdXNlcyBwYXJlbnQgcG9wdXAgY2xhc3MgdG8gZGVmaW5lIHRoaXMuX3BvcHVwRWxlbWVudCBieSBhY2Nlc3NpbmcgcGFyZW50IGNvbnN0cnVjdG9yXG4gICAgdGhpcy5fcG9wdXBGb3JtSW5wdXRzID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXRcIilcbiAgICApO1xuXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJmb3JtXCIpO1xuXG4gICAgLy90aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY29udGFpbmVyXCIpO1xuXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gIH1cblxuICBvcGVuKGRhdGEpIHtcbiAgICBzdXBlci5vcGVuKCk7IC8vY2FsbCBwYXJlbnQgb3BlbiBtZXRob2RcbiAgICBpZiAoZGF0YSkge1xuICAgICAgdGhpcy5fcG9wdXBGb3JtSW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5pZF07XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBfc3VibWl0KGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpOyAvL0JVTExFVCBQT0lOVCAjNiBSRVNPTFVUSU9OXG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XG4gICAgc3VwZXIuY2xvc2UoKTsgLy9jYWxsIHBhcmVudCBjbG9zZSBtZXRob2RcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX3BvcHVwRm9ybUlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXRWYWx1ZXNbaW5wdXQuaWRdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XG4gIH1cblxuICAvL0JVTExFVCBQT0lOVCAjNCBSRVNPTFVUSU9OXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fc3VibWl0VGhpcyA9IHRoaXMuX3N1Ym1pdC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX3N1Ym1pdFRoaXMpO1xuICB9XG59XG5cbi8vaW5kZXguanNcbiIsImltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcblxuY29uc3QgeW9zZW1pdGVJbWFnZSA9IG5ldyBVUkwoXCIuLi9pbWFnZXMveW9zZW1pdGUuanBnXCIsIGltcG9ydC5tZXRhLnVybCk7XG5cbi8qQ29uc3RhbnQgJiB2YXJpYWJsZSBkZWNsYXJhdGlvbiovXG5jb25zdCBwYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wYWdlXCIpO1xuXG5jb25zdCB2YWxpZGF0b3JDb25maWcgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2NvbnRhaW5lclwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zYXZlLWJ1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbn07XG5cbi8qUHJvZmlsZSBFZGl0aW5nKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuY29uc3QgcHJvZmlsZU5hbWVTZWxlY3RvciA9IFwiLnByb2ZpbGVfX25hbWVcIjtcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvblNlbGVjdG9yID0gXCIucHJvZmlsZV9fc3VidGl0bGVcIjtcbmNvbnN0IHByb2ZpbGUgPSB7IG5hbWU6IHByb2ZpbGVOYW1lU2VsZWN0b3IsIGpvYjogcHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3IgfTtcbmNvbnN0IGN1cnJlbnRQcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZU5hbWVTZWxlY3Rvcik7XG5jb25zdCBjdXJyZW50UHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgcHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3Jcbik7XG5cbmNvbnN0IHByb2ZpbGVFZGl0U2VsZWN0b3IgPSBcIi5tb2RhbF90eXBlX3Byb2ZpbGUtZWRpdFwiO1xuY29uc3QgcHJvZmlsZUVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZUVkaXRTZWxlY3Rvcik7XG5jb25zdCBwcm9maWxlRm9ybSA9IGRvY3VtZW50LmZvcm1zLnByb2ZpbGVGb3JtO1xuY29uc3QgcHJvZmlsZUZvcm1TZWxlY3RvciA9IHByb2ZpbGVGb3JtLmNsYXNzTmFtZTtcblxuLy9nbG9iYWwgdmFsaWRhdGlvbiB2YXJpYWJsZXNcblxuY29uc3QgZWRpdFByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXRcIik7XG5jb25zdCBwcm9maWxlTmFtZUlucHV0ID0gcHJvZmlsZUVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19wcm9maWxlLW5hbWVcIik7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcbiAgXCIubW9kYWxfX3Byb2ZpbGUtZGVzY3JpcHRpb25cIlxuKTtcbmNvbnN0IHNhdmVQcm9maWxlQnV0dG9uID0gcHJvZmlsZUVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zYXZlLWJ1dHRvblwiKTtcblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xuXG5jb25zdCBhZGREZXN0aW5hdGlvbkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYnV0dG9uXCIpO1xuY29uc3QgYWRkRGVzdGluYXRpb25TZWxlY3RvciA9IFwiLm1vZGFsX3R5cGVfYWRkLWNhcmRcIjtcbmNvbnN0IGFkZERlc3RpbmF0aW9uTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFkZERlc3RpbmF0aW9uU2VsZWN0b3IpO1xuXG5jb25zdCBkZXN0aW5hdGlvbkZvcm1UaXRsZSA9IGFkZERlc3RpbmF0aW9uTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fdGl0bGVcIik7XG5jb25zdCBkZXN0aW5hdGlvblRpdGxlID0gYWRkRGVzdGluYXRpb25Nb2RhbC5xdWVyeVNlbGVjdG9yKFxuICBcIi5tb2RhbF9fZGVzdGluYXRpb24tdGl0bGVcIlxuKTtcbmNvbnN0IGRlc3RpbmF0aW9uSW1hZ2VVcmwgPSBhZGREZXN0aW5hdGlvbk1vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLm1vZGFsX19kZXN0aW5hdGlvbi1pbWFnZS1VUkxcIlxuKTtcblxuY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkXCIpLmNvbnRlbnQ7XG5jb25zdCBjYXJkQ2xhc3NTZWxlY3RvciA9IFwiLmRlc3RpbmF0aW9ucy5wYWdlX19zZWN0aW9uXCI7XG5jb25zdCBjYXJkQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjYXJkQ2xhc3NTZWxlY3Rvcik7XG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBsaW5rOiB5b3NlbWl0ZUltYWdlLFxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gIH0sXG5cbiAge1xuICAgIGxpbms6IHJlcXVpcmUoXCIuLi9pbWFnZXMvbGFrZS1sb3Vpc2UuanBnXCIpLFxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcbiAgfSxcbiAge1xuICAgIGxpbms6IHJlcXVpcmUoXCIuLi9pbWFnZXMvYmFsZC1tb3VudGFpbnMuanBnXCIpLFxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgfSxcbiAge1xuICAgIGxpbms6IHJlcXVpcmUoXCIuLi9pbWFnZXMvbGF0ZW1hci5qcGdcIiksXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXG4gIH0sXG4gIHtcbiAgICBsaW5rOiByZXF1aXJlKFwiLi4vaW1hZ2VzL3Zhbm9pc2UuanBnXCIpLFxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gIH0sXG4gIHtcbiAgICBsaW5rOiByZXF1aXJlKFwiLi4vaW1hZ2VzL2xhZ28uanBnXCIpLFxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgfSxcbl07XG5jb25zdCBjbG9zZUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19jbG9zZS1pY29uXCIpO1xuXG5jb25zdCBjYXJkRm9ybSA9IGRvY3VtZW50LmZvcm1zLmNhcmRGb3JtO1xuXG5jb25zdCBwcmV2aWV3TW9kYWxTZWxlY3RvciA9IFwiLm1vZGFsX3R5cGVfcHJldmlld1wiO1xuY29uc3QgcHJldmlld01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihwcmV2aWV3TW9kYWxTZWxlY3Rvcik7XG5jb25zdCBwcmV2aWV3TW9kYWxJbWFnZSA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcbmNvbnN0IHByZXZpZXdNb2RhbENhcHRpb24gPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcbiAgXCIubW9kYWxfX3ByZXZpZXctY2FwdGlvblwiXG4pO1xuXG4vL3ZhbGlkYXRlIGltcG9ydC9leHBvcnRcbmNvbnN0IGltcG9ydFN0YXR1cyA9IFwiY29uc3RhbnRzLmpzIGltcG9ydCBzdWNjZXNzZnVsXCI7XG5cbmV4cG9ydCB7XG4gIHBhZ2UsXG4gIHZhbGlkYXRvckNvbmZpZyxcbiAgcHJvZmlsZSxcbiAgY3VycmVudFByb2ZpbGVOYW1lLFxuICBjdXJyZW50UHJvZmlsZURlc2NyaXB0aW9uLFxuICBwcm9maWxlRWRpdFNlbGVjdG9yLFxuICBwcm9maWxlRWRpdE1vZGFsLFxuICBwcm9maWxlRm9ybSxcbiAgcHJvZmlsZUZvcm1TZWxlY3RvcixcbiAgZWRpdFByb2ZpbGVCdXR0b24sXG4gIHByb2ZpbGVOYW1lSW5wdXQsXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LFxuICBzYXZlUHJvZmlsZUJ1dHRvbixcbiAgYWRkRGVzdGluYXRpb25CdXR0b24sXG4gIGFkZERlc3RpbmF0aW9uU2VsZWN0b3IsXG4gIGFkZERlc3RpbmF0aW9uTW9kYWwsXG4gIGRlc3RpbmF0aW9uRm9ybVRpdGxlLFxuICBkZXN0aW5hdGlvblRpdGxlLFxuICBkZXN0aW5hdGlvbkltYWdlVXJsLFxuICBjYXJkVGVtcGxhdGUsXG4gIGNhcmRDbGFzc1NlbGVjdG9yLFxuICBjYXJkQ29udGFpbmVyLFxuICBpbml0aWFsQ2FyZHMsXG4gIGNsb3NlQnV0dG9ucyxcbiAgY2FyZEZvcm0sXG4gIHByZXZpZXdNb2RhbFNlbGVjdG9yLFxuICBwcmV2aWV3TW9kYWwsXG4gIHByZXZpZXdNb2RhbEltYWdlLFxuICBwcmV2aWV3TW9kYWxDYXB0aW9uLFxuICBpbXBvcnRTdGF0dXMsXG59O1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKHsgbGluaywgbmFtZSB9LCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2spIHtcbiAgICAvL2NvbnNvbGUubG9nKFwiQ2FyZC5qcyBpbXBvcnRlZCB0byBpbmRleC5qc1wiKTtcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcblxuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xuXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xuICB9XG5cbiAgY3JlYXRlQ2FyZCgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRWaWV3KCk7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgLy9kZWZpbmUgY2FyZCBpbWFnZVxuXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzKTtcbiAgICB9KTtcblxuICAgIC8vZXZlbnQgTGlzdGVuZXJzIGZvciBsaWtlIGljb25cbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmRlc3RpbmF0aW9uc19fY2FwdGlvbi1pY29uXCJcbiAgICApO1xuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VCdXR0b24oKTtcbiAgICB9KTtcblxuICAgIC8vZGVsZXRlIGJ1dHRvblxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5kZXN0aW5hdGlvbnNfX3RyYXNoLWljb25cIlxuICAgICk7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVCdXR0b24oKTtcbiAgICB9KTtcblxuICAgIC8vSVNTVUUgIyA1IENMSUNLIEhBTkRMRVJTIEZPUiBJTUFHRVMgU0hPVUxEIE9OTFkgQkUgSU5TSURFIE9GIFRIRSBDQVJEIENMQVNTXG4gIH1cblxuICBfaGFuZGxlTGlrZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJkZXN0aW5hdGlvbnNfY2FwdGlvbi1pY29uX3N0eWxlX2xpa2VkXCIpO1xuICB9XG5cbiAgX2hhbmRsZURlbGV0ZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XG4gIH1cblxuICBnZXRWaWV3KCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGVzdGluYXRpb25zX19jYXJkXCIpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuICAgIC8vY29uc29sZS5sb2codGhpcy5fY2FyZEVsZW1lbnQpO1xuICAgIC8vY29uc29sZS5sb2codGhpcy5fY2FyZEVsZW1lbnQuY2xhc3NOYW1lKTtcblxuICAgIC8vZ2V0IHRoZSBjYXJkIHZpZXdcbiAgICAvL3NldCBldmVudCBsaXN0ZW5lcnMsXG4gICAgLy9yZXR1cm4gdGhlIGNhcmRcblxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGVzdGluYXRpb25zX19jYXB0aW9uLXRleHRcIikudGV4dENvbnRlbnQgPVxuICAgICAgdGhpcy5fbmFtZTtcblxuICAgIHRoaXMuX2NhcmRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fbmFtZS5yZXBsYWNlQWxsKFwiIFwiLCBcIl9cIikpO1xuXG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmRlc3RpbmF0aW9uc19fY2FyZC1pbWFnZVwiXG4gICAgKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcblxuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSBcIlBob3RvIG9mIFwiICsgdGhpcy5fbmFtZTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50O1xuXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuICB9XG59XG4iLCIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqKioqKioqKioqKioqKioqKioqKmluZGV4LmpzKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vL2Zyb20gc3ByaW50IDkgdGhlb3J5OiByZW1lbWJlciB5b3UgY2FuIHVzZSBmb3JtLmVsZW1lbnRzLlwibmFtZS1hdHRyaWJ1dGVcIiAobm8gcXVvdGVzKVxuLy9icmFuY2g6IHNwcmludF85XG4vL0lNUE9SVFNcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuY29uc29sZS5sb2coXCJpbmRleC5qcyBsb2FkZWRcIik7XG5cbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgUG9wdXAgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXAuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQge1xuICB2YWxpZGF0b3JDb25maWcsXG4gIHByb2ZpbGUsXG4gIHByb2ZpbGVFZGl0U2VsZWN0b3IsXG4gIHByb2ZpbGVFZGl0TW9kYWwsXG4gIGVkaXRQcm9maWxlQnV0dG9uLFxuICBhZGREZXN0aW5hdGlvbkJ1dHRvbixcbiAgYWRkRGVzdGluYXRpb25TZWxlY3RvcixcbiAgYWRkRGVzdGluYXRpb25Nb2RhbCxcbiAgZGVzdGluYXRpb25UaXRsZSxcbiAgZGVzdGluYXRpb25JbWFnZVVybCxcbiAgY2FyZENsYXNzU2VsZWN0b3IsXG4gIGluaXRpYWxDYXJkcyxcbiAgcHJldmlld01vZGFsU2VsZWN0b3IsXG4gIGltcG9ydFN0YXR1cyxcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuY29uc29sZS5sb2coYCR7aW1wb3J0U3RhdHVzfSAtPiBpbmRleC5qc2ApO1xuXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG4vL2ltcG9ydCB7IGhhbmRsZUltYWdlQ2xpY2sgfSBmcm9tIFwiLi4vdXRpbHMvdXRpbHMuanNcIjtcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbi8vRVZFTlQgTElTVEVORVJTIEFORCBDTEFTUyBPUEVSQVRJT05TXG4vKioqKioqKioqKioqKioqKioqKioqKioqKkVESVQgUFJPRklMRSoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuY29uc3QgcHJvZmlsZUVkaXRWYWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIHZhbGlkYXRvckNvbmZpZyxcbiAgcHJvZmlsZUVkaXRNb2RhbFxuKTtcblxucHJvZmlsZUVkaXRWYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuYWRkRGVzdGluYXRpb25Nb2RhbC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfdHlwZV9hZGQtZGVzdGluYXRpb25cIik7XG5jb25zdCBkZXN0aW5hdGlvbkZvcm0gPSBhZGREZXN0aW5hdGlvbk1vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLm1vZGFsX3R5cGVfYWRkLWRlc3RpbmF0aW9uIC5tb2RhbF9fY29udGFpbmVyXCJcbik7XG5cbmNvbnN0IHByb2ZpbGVVc2VyRGF0YSA9IG5ldyBVc2VySW5mbyhwcm9maWxlKTtcblxuY29uc3QgcHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiBwcm9maWxlRWRpdFNlbGVjdG9yLFxuICBoYW5kbGVGb3JtU3VibWl0OiAoZm9ybURhdGEpID0+IHtcbiAgICBmb3JtRGF0YS5pbnB1dDEgPSBmb3JtRGF0YS5wcm9maWxlX3RpdGxlO1xuICAgIGRlbGV0ZSBmb3JtRGF0YS5wcm9maWxlX3RpdGxlO1xuXG4gICAgZm9ybURhdGEuaW5wdXQyID0gZm9ybURhdGEucHJvZmlsZV9kZXNjcmlwdGlvbjtcbiAgICBkZWxldGUgZm9ybURhdGEucHJvZmlsZV9kZXNjcmlwdGlvbjtcblxuICAgIHByb2ZpbGVVc2VyRGF0YS5zZXRVc2VySW5mbyhmb3JtRGF0YSk7XG4gIH0sXG59KTtcblxucHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7IC8vQlVMTEVUIFBPSU5UICM0IFJFU09MVVRJT05cblxuZWRpdFByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gIHByb2ZpbGVQb3B1cC5vcGVuKHByb2ZpbGVVc2VyRGF0YS5nZXRVc2VySW5mbygpKTtcbn0pO1xuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqQUREIERFU1RJTkFUSU9OUyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuY29uc3QgZGVzdGluYXRpb25FZGl0VmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICB2YWxpZGF0b3JDb25maWcsXG4gIGFkZERlc3RpbmF0aW9uTW9kYWxcbik7XG5cbmRlc3RpbmF0aW9uRWRpdFZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xuXG4vL0NyZWF0ZSBzZWN0aW9uIGNsYXNzIGZvciBkZXN0aW5hdGlvbiBjYXJkc1xuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgcmVuZGVyZXI6IChjYXJkT2JqZWN0KSA9PiB7XG4gICAgICBjb25zdCBuZXdFbGVtZW50ID0gbmV3IENhcmQoY2FyZE9iamVjdCwgXCIjY2FyZFwiLCAoZGF0YSkgPT4ge1xuICAgICAgICBpbWFnZVBvcHVwLm9wZW4oZGF0YSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBuZXdFbGVtZW50LmdldFZpZXcoKTtcbiAgICB9LFxuICB9LFxuICBjYXJkQ2xhc3NTZWxlY3RvclxuKTtcblxuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZSh7IHBvcHVwU2VsZWN0b3I6IHByZXZpZXdNb2RhbFNlbGVjdG9yIH0pO1xuXG5jb25zdCBhZGREZXN0aW5hdGlvblBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiBhZGREZXN0aW5hdGlvblNlbGVjdG9yLFxuICBoYW5kbGVGb3JtU3VibWl0OiAoZm9ybURhdGEpID0+IHtcbiAgICBjb25zb2xlLmxvZyhmb3JtRGF0YSk7XG5cbiAgICBmb3JtRGF0YS5saW5rID0gZm9ybURhdGEuZGVzdGluYXRpb25faW1hZ2VfVVJMO1xuICAgIGRlbGV0ZSBmb3JtRGF0YS5kZXN0aW5hdGlvbl9pbWFnZV9VUkw7XG5cbiAgICBmb3JtRGF0YS5uYW1lID0gZm9ybURhdGEuZGVzdGluYXRpb25fdGl0bGU7XG4gICAgZGVsZXRlIGZvcm1EYXRhLmRlc3RpbmF0aW9uX3RpdGxlO1xuXG4gICAgY2FyZFNlY3Rpb24uYWRkSXRlbShmb3JtRGF0YSk7IC8vQlVMTEVUIFBPSU5UICMxMiBSRVNPTFVUSU9OXG4gICAgLy90ZXN0XG4gIH0sXG59KTtcblxuYWRkRGVzdGluYXRpb25Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpOyAvL0JVTExFVCBQT0lOVCAjNCBSRVNPTFVUSU9OXG5cbmFkZERlc3RpbmF0aW9uQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICBhZGREZXN0aW5hdGlvblBvcHVwLm9wZW4oKTtcbiAgZGVzdGluYXRpb25FZGl0VmFsaWRhdGlvbi50b2dnbGVCdXR0b25TdGF0ZSgpOyAvL0JVTExFVCBQT0lOVCAyIFJFU09MVVRJT05cbn0pO1xuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqTE9BRCBJTklUSUFMIENBUkRTIE9OVE8gUEFHRSoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGpvYiB9KSB7XG4gICAgdGhpcy5uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZSk7XG4gICAgdGhpcy5qb2JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2IpO1xuICAgIC8vY29uc29sZS5sb2coYHRoaXMubmFtZSB2YWx1ZTogJHt0aGlzLm5hbWVFbGVtZW50LnRleHRDb250ZW50fWApO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgY29uc3QgbmFtZVVwZGF0ZWQgPSB0aGlzLm5hbWVFbGVtZW50LnRleHRDb250ZW50O1xuICAgIGNvbnN0IGpvYlVwZGF0ZWQgPSB0aGlzLmpvYkVsZW1lbnQudGV4dENvbnRlbnQ7XG5cbiAgICByZXR1cm4geyBwcm9maWxlX3RpdGxlOiBuYW1lVXBkYXRlZCwgcHJvZmlsZV9kZXNjcmlwdGlvbjogam9iVXBkYXRlZCB9O1xuICB9XG5cbiAgc2V0VXNlckluZm8oZm9ybURhdGEpIHtcbiAgICBjb25zdCB7IGlucHV0MTogbmFtZUZvcm1WYWwsIGlucHV0Mjogam9iRm9ybVZhbCB9ID0gZm9ybURhdGE7XG5cbiAgICB0aGlzLm5hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZUZvcm1WYWw7XG4gICAgdGhpcy5qb2JFbGVtZW50LnRleHRDb250ZW50ID0gam9iRm9ybVZhbDtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNsYXNzU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jbGFzc1NlbGVjdG9yID0gY2xhc3NTZWxlY3RvcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNsYXNzU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMgPSAoKSA9PiB7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgY29uc3QgbmV3RWxlbWVudCA9IHRoaXMucmVuZGVyZXIoaXRlbSk7XG5cbiAgICAgIHRoaXMuX2FwcGVuZEl0ZW0obmV3RWxlbWVudCk7XG4gICAgfSk7XG4gIH07XG5cbiAgYWRkSXRlbSA9IChuZXdJdGVtKSA9PiB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQodGhpcy5yZW5kZXJlcihuZXdJdGVtKSk7XG4gIH07XG5cbiAgX2FwcGVuZEl0ZW0gPSAoZWxlbWVudCkgPT4ge1xuICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XG4gIH07XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XG4gICAgc3VwZXIoeyBwb3B1cENsYXNzU2VsZWN0b3I6IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiaW1nXCIpO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2VOYW1lID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJmaWdjYXB0aW9uXCIpO1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICAvL0JVTExFVCBQT0lOVCAjOSBSRVNPTFVUSU9OXG4gIG9wZW4oeyBfY2FyZEltYWdlOiB7IGFsdCwgc3JjIH0sIF9uYW1lOiBuYW1lIH0pIHtcbiAgICB0aGlzLl9wb3B1cEltYWdlLmFsdCA9IGFsdDtcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IHNyYztcbiAgICB0aGlzLl9wb3B1cEltYWdlTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG5cbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsIm0iLCJvIiwib2JqIiwicHJvcCIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInAiLCJiIiwiZG9jdW1lbnQiLCJiYXNlVVJJIiwic2VsZiIsImxvY2F0aW9uIiwiaHJlZiIsIkZvcm1WYWxpZGF0b3IiLCJjb25zdHJ1Y3RvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwidGhpcyIsIl9jb25maWciLCJfZm9ybUVsZW1lbnQiLCJjb25zb2xlIiwibG9nIiwic2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2VFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImlkIiwiY2xhc3NMaXN0IiwiYWRkIiwiaW5wdXRFcnJvckNsYXNzIiwidGV4dENvbnRlbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVycm9yQ2xhc3MiLCJoaWRlSW5wdXRFcnJvciIsInJlbW92ZSIsIl9jaGVja0Zvcm1WYWxpZGl0eSIsIl9pbnB1dEVsZW1lbnRzIiwiZXZlcnkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiY2hlY2tJbnB1dFZhbGlkaXR5IiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJfc3VibWl0QnV0dG9uIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImRpc2FibGVkIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImVuYWJsZVZhbGlkYXRpb24iLCJQb3B1cCIsIl9yZWYiLCJwb3B1cENsYXNzU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2Nsb3NlUG9wdXBCdXR0b24iLCJwYXJlbnRFbGVtZW50IiwiY2xvc2VzdCIsIm9wZW4iLCJfaGFuZGxlRXNjQ2xvc2VCb3VuZCIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMZWZ0TW91c2VDbG9zZSIsImlzTW9kYWwiLCJ0YXJnZXQiLCJjb250YWlucyIsImJ1dHRvbnMiLCJfaGFuZGxlRXNjQ2xvc2UiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsImJpbmQiLCJfaGFuZGxlTGVmdE1vdXNlQ2xvc2VCb3VuZCIsInByZXZlbnREZWZhdWx0IiwiUG9wdXBXaXRoRm9ybSIsInBvcHVwU2VsZWN0b3IiLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtSW5wdXRzIiwiQXJyYXkiLCJmcm9tIiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiZGF0YSIsImlucHV0IiwidmFsdWUiLCJfc3VibWl0IiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJpbnB1dFZhbHVlcyIsIl9zdWJtaXRUaGlzIiwieW9zZW1pdGVJbWFnZSIsIlVSTCIsInZhbGlkYXRvckNvbmZpZyIsImZvcm1TZWxlY3RvciIsInByb2ZpbGVOYW1lU2VsZWN0b3IiLCJwcm9maWxlRGVzY3JpcHRpb25TZWxlY3RvciIsInByb2ZpbGUiLCJuYW1lIiwiam9iIiwicHJvZmlsZUVkaXRTZWxlY3RvciIsInByb2ZpbGVFZGl0TW9kYWwiLCJlZGl0UHJvZmlsZUJ1dHRvbiIsImZvcm1zIiwicHJvZmlsZUZvcm0iLCJjbGFzc05hbWUiLCJhZGREZXN0aW5hdGlvbkJ1dHRvbiIsImFkZERlc3RpbmF0aW9uU2VsZWN0b3IiLCJhZGREZXN0aW5hdGlvbk1vZGFsIiwiY2FyZENsYXNzU2VsZWN0b3IiLCJjb250ZW50IiwiaW5pdGlhbENhcmRzIiwibGluayIsInJlcXVpcmUiLCJwcmV2aWV3TW9kYWxTZWxlY3RvciIsImNhcmRGb3JtIiwicHJldmlld01vZGFsIiwiQ2FyZCIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJfbmFtZSIsIl9saW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiY3JlYXRlQ2FyZCIsImdldFZpZXciLCJfY2FyZEltYWdlIiwiX2xpa2VCdXR0b24iLCJfY2FyZEVsZW1lbnQiLCJfaGFuZGxlTGlrZUJ1dHRvbiIsIl9kZWxldGVCdXR0b24iLCJfaGFuZGxlRGVsZXRlQnV0dG9uIiwidG9nZ2xlIiwiY2xvbmVOb2RlIiwicmVwbGFjZUFsbCIsInNyYyIsImFsdCIsInByb2ZpbGVVc2VyRGF0YSIsIm5hbWVFbGVtZW50Iiwiam9iRWxlbWVudCIsImdldFVzZXJJbmZvIiwicHJvZmlsZV90aXRsZSIsInByb2ZpbGVfZGVzY3JpcHRpb24iLCJzZXRVc2VySW5mbyIsImZvcm1EYXRhIiwiaW5wdXQxIiwibmFtZUZvcm1WYWwiLCJpbnB1dDIiLCJqb2JGb3JtVmFsIiwicHJvZmlsZVBvcHVwIiwiZGVzdGluYXRpb25FZGl0VmFsaWRhdGlvbiIsImNhcmRTZWN0aW9uIiwiY2xhc3NTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfY2xhc3NTZWxlY3RvciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJuZXdFbGVtZW50IiwiX2FwcGVuZEl0ZW0iLCJhZGRJdGVtIiwibmV3SXRlbSIsInByZXBlbmQiLCJlbGVtZW50IiwiYXBwZW5kIiwiY2FyZE9iamVjdCIsImltYWdlUG9wdXAiLCJfcG9wdXBJbWFnZSIsIl9wb3B1cEltYWdlTmFtZSIsIl9yZWYyIiwiYWRkRGVzdGluYXRpb25Qb3B1cCIsImRlc3RpbmF0aW9uX2ltYWdlX1VSTCIsImRlc3RpbmF0aW9uX3RpdGxlIl0sInNvdXJjZVJvb3QiOiIifQ==